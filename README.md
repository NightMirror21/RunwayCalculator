# Расчёт пробега самолёта при посадке

Этот проект моделирует торможение самолёта на ВПП после касания. Программа шаг за шагом (по времени) рассчитывает, как скорость уменьшается под действием разных сил: тормозов колёс, аэродинамического сопротивления, реверса тяги и тормозного парашюта. Итог — длина пробега до полной остановки.

## Что моделируется

### Самолёт (Plane)
Хранит и возвращает параметры самолёта:
- скорость посадки,
- массу,
- площадь крыла,
- коэффициенты подъёмной силы и сопротивления,
- параметры реверса и парашюта.

### Покрытие ВПП (Ground)
Хранит коэффициент трения μ:
- сухой бетон: μ выше,
- мокрый бетон: μ ниже.

### Ветер (Environment)
Содержит скорости:
- **встречного** ветра (положительное значение),
- **бокового** ветра.

- `NoWindEnvironment` — безветрие,
- `HeadwindEnvironment` — заданный встречный и боковой ветер.

## Какие силы учитываются

На самолёт при пробеге действуют силы, тормозящие движение:

### Тормоза колёс
Формула: 

```
F_тормоз = μ * N_продольная
```

Где:
- **μ** — коэффициент трения покрытия ВПП,
- **N_продольная** — часть нормальной реакции, «доступная» для продольного торможения.

Почему не вся реакция? Потому что часть «уходит» на боковое трение, если есть боковой ветер.

###  Аэродинамическое сопротивление
Формула:

```
F_drag = 0.5 * ρ * S * V^2 * C_d
```

Где:
- **ρ** — плотность воздуха (≈1.225 кг/м³),
- **S** — площадь крыла,
- **V** — истинная воздушная скорость (включая боковую составляющую),
- **C_d** — коэффициент сопротивления.

Важно: сопротивление растёт **квадратично** по скорости (в 2 раза быстрее → сопротивление в 4 раза больше).

### Подъёмная сила
Формула:

```
F_lift = 0.5 * ρ * S * V^2 * C_l
```

Где **C_l** — коэффициент подъёмной силы.

Подъёмная сила **уменьшает** нагрузку на колёса. Поэтому при высокой скорости тормозами «цепляться» за ВПП сложнее.

### Реверс тяги
Реверс тормозит самолёт двигателями. В модели он работает **пока скорость выше порога** (cutoff) и плавно убывает до нуля:

```
если V <= V_cutoff -> F_reverse = 0
если V >= V_landing -> F_reverse = F_max
иначе F_reverse = F_max * (V - V_cutoff) / (V_landing - V_cutoff)
```

Почему есть порог? В реальности на малых скоростях реверс малоэффективен и часто запрещён по процедурам.

### Тормозной парашют
Работает не сразу: сначала задержка, затем раскрытие.
Сила парашюта рассчитывается как аэродинамическое сопротивление:

```
F_chute = 0.5 * ρ * A_chute * V^2 * progress
```

где `progress` плавно растёт от 0 до 1 за 1.5 секунды после задержки.

Парашют не работает при слишком малой скорости (ниже 70% от скорости раскрытия).

## Боковой ветер и его влияние

Если есть боковой ветер, самолёт «скользит» боком относительно оси полосы. Тогда часть нагрузки уходит на боковое трение, и для тормозов остаётся меньше.

### Угол скольжения

```
slip = arctan(V_бок / V_прод)
```

Доля нагрузки, которая уходит в боковое трение:

```
fraction = min(0.5, |slip| / limit)
```

где `limit` ≈ 15° (0.26 рад). Не более 50% нагрузки уходит в бок.

Это уменьшает эффективные тормоза колёс:

```
N_прод = N * (1 - fraction)
```

## Итоговое замедление

Все тормозные силы складываются:

```
F_total = F_тормоз + F_drag + F_reverse + F_chute + F_доп_от_бокового
```

Затем ускорение (точнее, замедление):

```
a = -F_total / m
```

Далее новая скорость через маленький шаг времени `dt`:

```
V_new = V + a * dt
```

И пройденная дистанция за шаг (трапецеидально):

```
S += (V + V_new) / 2 * dt
```

Процесс повторяется, пока скорость не станет почти нулевой.

## 6. Что такое «истинная воздушная скорость»

Если есть встречный или боковой ветер, самолёт ощущает «другую» скорость относительно воздуха. Это и есть **истинная воздушная скорость**:

```
V_возд = sqrt( (V_прод + V_встречный)^2 + V_бок^2 )
```

Именно эта скорость используется для расчёта аэродинамики и парашюта.

## Где реализовано в коде

Основная логика расчёта находится в:
- `LandingRollCalculator.java`

Расчёты сил:
- `AerodynamicDragCalculator.java` — сопротивление воздуха
- `LiftCalculator.java` — подъёмная сила
- `BrakeChuteCalculator.java` — парашют
- `ReverseThrustCalculator.java` — реверс

Параметры самолёта:
- `MiG29.java`

Окружение:
- `NoWindEnvironment.java`
- `HeadwindEnvironment.java`

Покрытие ВПП:
- `DryConcreteGround.java`
- `WetConcreteGround.java`

## Как читать вывод

Программа может вывести таблицу по шагам:
- **шаг** — номер шага по времени
- **t, c** — время с момента касания
- **V, м/с** — скорость по земле
- **Vвозд** — воздушная скорость
- **a, м/с^2** — ускорение (отрицательное = торможение)
- **S, м** — накопленный пробег
- **Тормоз, Н** — сила от колёсных тормозов
- **Реверс, Н** — сила реверса
- **Парашют, Н** — сила тормозного парашюта

В конце выводится итоговая длина пробега.


## Что важно помнить (ограничения модели)

Эта модель **упрощённая**. Она не учитывает:
- реальную динамику шасси,
- изменение коэффициентов при разных условиях,
- тормозной перегрев,
- пробуксовку шин,
- сложную аэродинамику на малых скоростях,
- влияние тяги двигателя без реверса,
- неровность ВПП и т.д.

## Почему реверс отключается на скорости

В реальности реверс тяги:
- становится малоэффективным на малых скоростях,
- может быть запрещён по регламенту (опасен на малой скорости).

Поэтому модель отключает реверс ниже порога `reverseCutoffSpeed`.